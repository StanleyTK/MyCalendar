(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{7310:(e,s,t)=>{Promise.resolve().then(t.bind(t,5597))},6046:(e,s,t)=>{"use strict";var a=t(6658);t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}})},5597:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l});var a=t(5155),r=t(2115),n=t(6046);function l(){let e=(0,n.useRouter)(),[s,t]=(0,r.useState)({username:"",password:""}),[l,o]=(0,r.useState)("");(0,r.useEffect)(()=>{localStorage.getItem("userToken")&&e.push("/todo")},[e]);let u=e=>{t({...s,[e.target.name]:e.target.value})},i=async t=>{t.preventDefault();try{let t=await fetch("http://127.0.0.1:8000/api/users/login/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:s.username,password:s.password})});if(t.ok){let s=await t.json();localStorage.setItem("userToken",s.token),e.push("/todo")}else{let e=await t.json();o(e.message||"Invalid username or password")}}catch(e){o("An error occurred while logging in. Please try again later.")}};return(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:(0,a.jsxs)("div",{className:"bg-gray-800 text-white p-8 rounded-lg shadow-md w-full max-w-md",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold mb-4 text-center",children:"Login to MyCalendar"}),l&&(0,a.jsx)("p",{className:"text-red-500 text-center mb-4",children:l}),(0,a.jsxs)("form",{onSubmit:i,children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"username",className:"block text-gray-400 mb-1",children:"Username"}),(0,a.jsx)("input",{type:"text",id:"username",name:"username",value:s.username,onChange:u,required:!0,className:"w-full px-3 py-2 bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-gray-400 mb-1",children:"Password"}),(0,a.jsx)("input",{type:"password",id:"password",name:"password",value:s.password,onChange:u,required:!0,className:"w-full px-3 py-2 bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsx)("button",{type:"submit",className:"w-full bg-blue-500 py-2 rounded-lg text-white font-semibold hover:bg-blue-600 transition",children:"Login"})]}),(0,a.jsx)("div",{className:"text-center mt-4",children:(0,a.jsxs)("p",{className:"text-gray-400",children:["Don't have an account?"," ",(0,a.jsx)("button",{onClick:()=>e.push("/signup"),className:"text-blue-500 hover:underline",children:"Sign up"})]})})]})})}t(5786)},5786:()=>{}},e=>{var s=s=>e(e.s=s);e.O(0,[523,441,517,358],()=>s(7310)),_N_E=e.O()}]);